# СПИСОК ЗАДАЧ (TASKS)

- [x] **[AUDIT] Глубокий анализ репозитория** <!-- id: 0 -->
    - [x] **Этап Анализа**
    - [x] Анализ структуры `DONOR` и бизнес-логики <!-- id: 1 -->
    - [x] Анализ текущего состояния `Reshala-AI-ticket-bot` <!-- id: 2 -->
    - [x] **Новый Аудит (2026-02-16)**: Полная проверка безопасности и консистентности <!-- id: 3 -->
    - [x] Создание `AUDIT_REPORT.md` <!-- id: 4 -->

- [x] **Фаза Критических Исправлений (ПРИОРИТЕТ)** <!-- id: 5 -->
    - [x] **[BLOCKER] Исправление Запуска Бота** <!-- id: 6 -->
        - [x] Добавить сервис `bot` в `docker-compose.yml`
        - [x] Создать точку входа для бота (`python -m backend.bot.main`)
    - [x] **[CRITICAL] Защита API Эндпоинтов** <!-- id: 7 -->
        - [x] Добавить Auth Middleware (Валидация Telegram `initData`)
        - [x] Защитить `/api/settings` (GET/PUT)
        - [x] Маскировать секреты в ответах API
    - [x] **[MAJOR] Безопасность Frontend** <!-- id: 8 -->
        - [x] Переключиться на валидацию `initData`
        - [x] Убрать зависимость от `initDataUnsafe` для критических действий

- [ ] **Фаза Реализации** <!-- id: 9 -->
    - [x] Создать `backend/utils/support_common.py` (Общая логика) <!-- id: 10 -->
    - [ ] Рефакторинг `backend/routers/tickets.py` (Логика API) <!-- id: 11 -->
    - [ ] Рефакторинг `backend/bot/handlers/support.py` (Логика Бота) <!-- id: 12 -->
    - [ ] Верификация и Тестирование (Ручной тест пользователем) <!-- id: 13 -->

- [ ] [DOCS] Создать Базу Знаний Архитектуры <!-- id: 14 -->
- [ ] [DOCS] Создать Системный Промпт / Снапшот Памяти <!-- id: 15 -->
