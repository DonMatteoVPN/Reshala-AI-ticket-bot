# ะะตัะฐะปะฐ Support ะพั DonMatteo

Telegram ะฑะพั ะดะปั ัะตัะฝะธัะตัะบะพะน ะฟะพะดะดะตัะถะบะธ ั AI-ะฐะฒัะพะพัะฒะตัะฐะผะธ ะธ Mini App ะดะปั ะผะตะฝะตะดะถะตัะพะฒ.

## ๐ ะะพะทะผะพะถะฝะพััะธ

- ๐ค **AI-ะฐะฒัะพะพัะฒะตัั** โ ะฟะพะดะดะตัะถะบะฐ 5 ะฟัะพะฒะฐะนะดะตัะพะฒ ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะฟะตัะตะบะปััะตะฝะธะตะผ ะฟัะธ ะพัะธะฑะบะฐั
- ๐ฑ **Telegram Mini App** โ ะฟะฐะฝะตะปั ัะฟัะฐะฒะปะตะฝะธั ะดะปั ะผะตะฝะตะดะถะตัะพะฒ
- ๐ฌ **ะกะธััะตะผะฐ ัะธะบะตัะพะฒ** โ ััะฐัััั: ๐ฌ ะพัะบััั โ ๐ฅ ััะบะฐะปะฐัะธั โ ๐จ ะฟะพะดะพะทัะธัะตะปัะฝัะน โ โ ะทะฐะบััั
- ๐ **ะะฐะทะฐ ะทะฝะฐะฝะธะน** โ ะบะพะฝัะตะบัั ะดะปั AI ะธะท ัะตะดะฐะบัะธััะตะผัั ััะฐัะตะน
- ๐ **ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน** โ ะธะฝัะตะณัะฐัะธั ั Remnawave API
- ๐ฐ **ะะฐะปะฐะฝั** โ ะธะฝัะตะณัะฐัะธั ั Bedolaga API

---

## ๐ฆ ะฃััะฐะฝะพะฒะบะฐ ัะตัะตะท Docker Compose

### ะจะฐะณ 1: ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone https://github.com/your-repo/reshala-support.git
cd reshala-support
```

### ะจะฐะณ 2: ะกะพะทะดะฐะฝะธะต ัะฐะนะปะฐ `.env`

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:

```bash
cp .env.example .env
nano .env
```

ะะฐะฟะพะปะฝะธัะต ะฟะตัะตะผะตะฝะฝัะต:

```env
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#                    ะะะฏะะะขะะะฌะะซะ ะะะกะขะะะะะ
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Telegram Bot โ ะฟะพะปััะธัั ั @BotFather
BOT_TOKEN=1234567890:ABCDEFghijklmnop_qrstuvwxyz123456789

# Remnawave Panel API
REMNAWAVE_API_URL=https://your-panel.example.com
REMNAWAVE_API_TOKEN=your_jwt_token_from_panel

# ะััะฟะฟะฐ ะฟะพะดะดะตัะถะบะธ โ ID ะณััะฟะฟั ั ัะพะฟะธะบะฐะผะธ (ะฝะฐัะธะฝะฐะตััั ั -100)
SUPPORT_GROUP_ID=-1001234567890

# ID ะผะตะฝะตะดะถะตัะพะฒ ัะตัะตะท ะทะฐะฟัััั (ะฟะพะปััะธัั ั @userinfobot)
ALLOWED_MANAGER_IDS=123456789,987654321

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#                    URL ะะะฏ MINI APP
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# ะัะฑะปะธัะฝัะน URL ะฑัะบะตะฝะดะฐ ะดะปั Mini App
# ะะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ: http://localhost:8001
# ะะปั ะฟัะพะดะฐะบัะตะฝะฐ: https://api.your-domain.com
REACT_APP_BACKEND_URL=https://api.your-domain.com

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
#                    ะะะฆะะะะะะฌะะ (Bedolaga)
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Bedolaga API ะดะปั ะฟัะพะฒะตัะบะธ ะฑะฐะปะฐะฝัะฐ (ะตัะปะธ ะธัะฟะพะปัะทัะตััั)
# BEDOLAGA_API_URL=https://bedolaga.example.com
# BEDOLAGA_API_TOKEN=your_bedolaga_token
```

### ะจะฐะณ 3: ะะฐะฟััะบ

```bash
docker compose up -d
```

ะัะพะฒะตัะบะฐ ััะฐัััะฐ:

```bash
docker compose ps
```

ะั ะดะพะปะถะฝั ัะฒะธะดะตัั 3 ัะฐะฑะพัะฐััะธั ะบะพะฝัะตะนะฝะตัะฐ:
- `reshala-mongodb` โ ะฑะฐะทะฐ ะดะฐะฝะฝัั
- `reshala-backend` โ API ะธ ะฑะพั
- `reshala-frontend` โ Mini App

### ะจะฐะณ 4: ะะฐัััะพะนะบะฐ Mini App ะฒ BotFather

1. ะัะบัะพะนัะต @BotFather ะฒ Telegram
2. ะัะฟัะฐะฒััะต `/mybots` โ ะฒัะฑะตัะธัะต ะฒะฐัะตะณะพ ะฑะพัะฐ
3. **Bot Settings** โ **Menu Button** โ **Configure Menu Button**
4. ะะฒะตะดะธัะต URL ะฒะฐัะตะณะพ Mini App: `https://your-domain.com`
5. ะะฒะตะดะธัะต ะฝะฐะทะฒะฐะฝะธะต ะบะฝะพะฟะบะธ: `ะะฐะฝะตะปั`

---

## ๐ง ะะพััั ะธ URL

| ะกะตัะฒะธั | ะะฝัััะตะฝะฝะธะน ะฟะพัั | ะะฝะตัะฝะธะน ะฟะพัั | URL |
|--------|-----------------|--------------|-----|
| Backend API | 8001 | 8001 | http://localhost:8001 |
| Frontend | 80 | 3000 | http://localhost:3000 |
| MongoDB | 27017 | โ | ะขะพะปัะบะพ ะฒะฝัััะตะฝะฝะธะน |

---

## ๐ ะัะพัะผะพัั ะปะพะณะพะฒ

```bash
# ะัะต ัะตัะฒะธัั
docker compose logs -f

# ะขะพะปัะบะพ backend (ะฑะพั + API)
docker compose logs -f backend

# ะขะพะปัะบะพ frontend
docker compose logs -f frontend

# ะะพัะปะตะดะฝะธะต 100 ัััะพะบ backend
docker compose logs --tail=100 backend
```

---

## ๐ ะะฑะฝะพะฒะปะตะฝะธะต

```bash
# ะััะฐะฝะพะฒะบะฐ
docker compose down

# ะะพะปััะตะฝะธะต ะพะฑะฝะพะฒะปะตะฝะธะน
git pull

# ะะตัะตัะฑะพัะบะฐ ะธ ะทะฐะฟััะบ
docker compose up -d --build
```

---

## ๐ Troubleshooting

### ะะพั ะฝะต ะทะฐะฟััะบะฐะตััั

1. ะัะพะฒะตัััะต `BOT_TOKEN`:
```bash
docker compose logs backend | grep -i "bot"
```

2. ะฃะฑะตะดะธัะตัั ััะพ ัะพะบะตะฝ ะฟัะฐะฒะธะปัะฝัะน (ะดะพะปะถะตะฝ ะฑััั ะฒะธะดะฐ `123456789:ABCdef...`)

### Mini App ะฟะพะบะฐะทัะฒะฐะตั "ะะพัััะฟ ะทะฐะฟัะตััะฝ"

1. ะัะพะฒะตัััะต ััะพ ะฒะฐั Telegram ID ะดะพะฑะฐะฒะปะตะฝ ะฒ `ALLOWED_MANAGER_IDS`
2. ะฃะทะฝะฐัั ัะฒะพะน ID: ะพัะฟัะฐะฒััะต ะปัะฑะพะต ัะพะพะฑัะตะฝะธะต ะฑะพัั @userinfobot

### ะะต ัะฐะฑะพัะฐะตั ะฟะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

1. ะัะพะฒะตัััะต `REMNAWAVE_API_URL` ะธ `REMNAWAVE_API_TOKEN`
2. ะฃะฑะตะดะธัะตัั ััะพ API ะฟะฐะฝะตะปะธ ะดะพัััะฟะตะฝ ั ัะตัะฒะตัะฐ

### MongoDB ะฝะต ะทะฐะฟััะบะฐะตััั

```bash
# ะัะพะฒะตัะบะฐ healthcheck
docker compose ps

# ะัะปะธ mongodb unhealthy:
docker compose restart mongodb
```

### ะัะธััะบะฐ ะธ ะฟะพะปะฝัะน ะฟะตัะตะทะฐะฟััะบ

```bash
docker compose down -v  # ะฃะดะฐะปะธั ะฒัะต ะดะฐะฝะฝัะต!
docker compose up -d --build
```

---

## ๐ ะะพัะฐัะธั ะปะพะณะพะฒ

Docker ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพัะธััะตั ะปะพะณะธ:
- **Backend**: ะดะพ 50MB ร 5 ัะฐะนะปะพะฒ = max 250MB
- **Frontend**: ะดะพ 10MB ร 3 ัะฐะนะปะฐ = max 30MB
- **MongoDB**: ะดะพ 10MB ร 3 ัะฐะนะปะฐ = max 30MB

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
reshala-support/
โโโ .env                    # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
โโโ docker-compose.yml      # Docker ะบะพะฝัะธะณััะฐัะธั
โโโ backend/
โ   โโโ Dockerfile
โ   โโโ server.py           # FastAPI ัะพัะบะฐ ะฒัะพะดะฐ
โ   โโโ database.py         # MongoDB ะฟะพะดะบะปััะตะฝะธะต
โ   โโโ bot/                # Telegram ะฑะพั
โ   โ   โโโ main.py
โ   โ   โโโ handlers/
โ   โโโ routers/            # API ัะฝะดะฟะพะธะฝัั
โ   โโโ services/           # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ       โโโ ai/
โ           โโโ manager.py  # AI ะฟัะพะฒะฐะนะดะตัั ั failover
โโโ frontend/
โ   โโโ Dockerfile
โ   โโโ nginx.conf
โ   โโโ src/
โ       โโโ App.js
โ       โโโ pages/
โ       โโโ components/
โโโ memory/
    โโโ PRD.md
    โโโ CHANGELOG.md
```

---

## ๐ค AI ะัะพะฒะฐะนะดะตัั

ะะฐัััะพะนะบะฐ ัะตัะตะท Mini App โ AI ะัะพะฒะฐะนะดะตัั:

| ะัะพะฒะฐะนะดะตั | ะะพะดะตะปะธ | ะะพะปััะธัั ะบะปัั |
|-----------|--------|---------------|
| **Groq** | llama-3.1, mixtral | [console.groq.com](https://console.groq.com) |
| **OpenAI** | GPT-4o, GPT-4 | [platform.openai.com](https://platform.openai.com) |
| **Anthropic** | Claude 3 | [console.anthropic.com](https://console.anthropic.com) |
| **Google** | Gemini Pro, Flash | [aistudio.google.com](https://aistudio.google.com) |
| **OpenRouter** | ะัะต ะผะพะดะตะปะธ | [openrouter.ai](https://openrouter.ai) |

**ะะฒัะพะผะฐัะธัะตัะบะธะน failover**: ะตัะปะธ ะพะดะธะฝ ะบะปัั ะฟะตัะตััะฐัั ัะฐะฑะพัะฐัั, ัะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะตัะตะบะปััะฐะตััั ะฝะฐ ัะปะตะดัััะธะน.

---

## ๐ API ะญะฝะดะฟะพะธะฝัั

### ะะฐัััะพะนะบะธ
- `GET /api/settings` โ ะฟะพะปััะธัั ะฝะฐัััะพะนะบะธ
- `PUT /api/settings` โ ะพะฑะฝะพะฒะธัั ะฝะฐัััะพะนะบะธ

### AI
- `POST /api/ai/chat` โ ะพัะฟัะฐะฒะธัั ัะพะพะฑัะตะฝะธะต AI
- `PUT /api/ai/provider/{name}` โ ะพะฑะฝะพะฒะธัั ะฟัะพะฒะฐะนะดะตัะฐ
- `POST /api/ai/provider/{name}/test` โ ัะตััะธัะพะฒะฐัั ะบะปัั

### ะขะธะบะตัั
- `GET /api/tickets/active` โ ะฐะบัะธะฒะฝัะต ัะธะบะตัั
- `POST /api/tickets/{id}/reply` โ ะพัะฒะตัะธัั ะฝะฐ ัะธะบะตั
- `POST /api/tickets/{id}/close` โ ะทะฐะบัััั ัะธะบะตั

### ะะพะธัะบ
- `POST /api/lookup` โ ะฟะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพ ID/username

### ะะฐะทะฐ ะทะฝะฐะฝะธะน
- `GET /api/knowledge/articles` โ ัะฟะธัะพะบ ััะฐัะตะน
- `POST /api/knowledge/articles` โ ัะพะทะดะฐัั ััะฐััั
- `PUT /api/knowledge/articles/{id}` โ ะพะฑะฝะพะฒะธัั
- `DELETE /api/knowledge/articles/{id}` โ ัะดะฐะปะธัั

---

## ๐ Production Deployment

### Docker
Build and run the container:
```bash
docker build -t reshala-backend .
docker run -d -p 8000:8000 --env-file .env --name reshala-backend reshala-backend
```

### Testing
Run unit tests:
```bash
pytest tests/
```

### Healthcheck
The service exposes a health check endpoint:
`GET /api/health`

---

## ๐ ะะธัะตะฝะทะธั

MIT License

---

## ๐ฌ ะะพะดะดะตัะถะบะฐ

- Telegram: @DonMatteo
- GitHub Issues
