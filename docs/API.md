# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API Reshala Support

## üîó –ë–∞–∑–æ–≤—ã–π URL
- **–õ–æ–∫–∞–ª—å–Ω–æ:** `http://localhost:8001`
- **–ü—Ä–æ–¥–∞–∫—à–Ω:** `https://api.your-domain.com`

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–∫—Ä–æ–º–µ `/api/webhooks/*` –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö) —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Telegram Mini App —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization` –∏–ª–∏ `X-Telegram-Init-Data`, –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `SKIP_AUTH=true` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

---

## üé´ API –¢–∏–∫–µ—Ç–æ–≤ (`/api/tickets`)

### –ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –≤–Ω–∏–º–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (–≠—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ + –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ).
- **GET** `/api/tickets/active`
- **–û—Ç–≤–µ—Ç:**
  ```json
  {
    "tickets": [
      {
        "id": "mongo_id",
        "client_id": 123456789,
        "status": "escalated",
        "reason": "AI –Ω–µ —Å–ø—Ä–∞–≤–∏–ª—Å—è",
        "created_at": "2023-10-27T10:00:00"
      }
    ]
  }
  ```

### –ü–æ–ª—É—á–∏—Ç—å —ç—Å–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∏–∫–µ—Ç—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É.
- **GET** `/api/tickets/escalated`

### –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∏–∫–µ—Ç—ã, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –∫–∞–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ).
- **GET** `/api/tickets/suspicious`

### –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —Ç–∏–∫–µ—Ç–∞
- **GET** `/api/tickets/{ticket_id}`

### –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Ç–∏–∫–µ—Ç
–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –æ—Ç –∏–º–µ–Ω–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.
- **POST** `/api/tickets/{ticket_id}/reply`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  {
    "message": "–ü—Ä–∏–≤–µ—Ç, –º—ã –≤—Å—ë –ø–æ—á–∏–Ω–∏–ª–∏!",
    "manager_name": "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä"
  }
  ```

### –ó–∞–∫—Ä—ã—Ç—å —Ç–∏–∫–µ—Ç
–ü–æ–º–µ—Ç–∏—Ç—å —Ç–∏–∫–µ—Ç –∫–∞–∫ –∑–∞–∫—Ä—ã—Ç—ã–π –∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ø–∏–∫.
- **POST** `/api/tickets/{ticket_id}/close`

### –£–¥–∞–ª–∏—Ç—å —Ç–∏–∫–µ—Ç
–£–±—Ä–∞—Ç—å —Ç–∏–∫–µ—Ç –∏–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ (—Å–∫—Ä—ã—Ç—å/–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ).
- **POST** `/api/tickets/{ticket_id}/remove`

### –≠—Å–∫–∞–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–∫–µ—Ç
–í—Ä—É—á–Ω—É—é —ç—Å–∫–∞–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–∫–µ—Ç –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.
- **POST** `/api/tickets/{ticket_id}/escalate`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  { "reason": "–°–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å" }
  ```

### –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π
–í—Ä—É—á–Ω—É—é –ø–æ–º–µ—Ç–∏—Ç—å —Ç–∏–∫–µ—Ç –∫–∞–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π.
- **POST** `/api/tickets/{ticket_id}/mark-suspicious`

### –î–æ–±–∞–≤–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ
–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª –∏–ª–∏ —Å—Å—ã–ª–∫—É –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞ (—Å–∫—Ä–∏–Ω—à–æ—Ç, —Å—Å—ã–ª–∫–∞ –∏ —Ç.–¥.).
- **POST** `/api/tickets/{ticket_id}/add-attachment`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  { "type": "image", "value": "http://link.to/image.jpg" }
  ```

---

## ü§ñ API –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI (`/api/ai`)

### –¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ API –∫–ª—é—á–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
- **POST** `/api/ai/test-connection`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  { "provider": "openai", "key": "sk-..." }
  ```

### –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
- **GET** `/api/ai/models/{provider_name}`

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –º–æ–¥–µ–ª—å
–í—ã–±—Ä–∞—Ç—å, –∫–∞–∫—É—é –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
- **POST** `/api/ai/set-model`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  { "provider": "openai", "model": "gpt-4" }
  ```

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
–í—ã–±—Ä–∞—Ç—å, –∫–∞–∫–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **POST** `/api/ai/set-active-provider`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  { "provider": "anthropic" }
  ```

### –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç
–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- **POST** `/api/ai/chat`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  { "message": "–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å VPN?", "provider": "openai" }
  ```

### –ü–æ–ª—É—á–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏.
- **GET** `/api/ai/stock-prompt`

---

## ‚ö° API –î–µ–π—Å—Ç–≤–∏–π (`/api/actions`)
*–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Remnawave Panel*

### –°–±—Ä–æ—Å–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫
- **POST** `/api/actions/reset-traffic`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `{ "userUuid": "uuid-string" }`

### –ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–ª—é—á–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (Revoke).
- **POST** `/api/actions/revoke-subscription`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `{ "userUuid": "uuid-string" }`

### –í–∫–ª—é—á–∏—Ç—å/–û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **POST** `/api/actions/enable-user`
- **POST** `/api/actions/disable-user`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `{ "userUuid": "uuid-string" }`

### –£–¥–∞–ª–∏—Ç—å HWID (–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
–£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∏–ª–∏ –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **POST** `/api/actions/hwid-delete`
  - **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `{ "userUuid": "...", "hwid": "..." }`
- **POST** `/api/actions/hwid-delete-all`
  - **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `{ "userUuid": "..." }`

---

## üîç API –ü–æ–∏—Å–∫–∞ (`/api/lookup`)

### –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Remnawave Panel –ø–æ Telegram ID –∏–ª–∏ Username.
- **POST** `/api/lookup`
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `{ "query": "12345678" }` –∏–ª–∏ `{ "query": "@username" }`
- **–û—Ç–≤–µ—Ç:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–µ—Ç–∞–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Å–ø–∏—Å–æ–∫ HWID.

---

## üí∞ API Bedolaga (`/api/bedolaga`)
*–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∏–ª–ª–∏–Ω–≥–æ–º Bedolaga*

### –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
- **GET** `/api/bedolaga/balance/{telegram_id}`

### –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π
- **GET** `/api/bedolaga/deposits/{telegram_id}?limit=30`
